{"version":3,"sources":["../../../ReactDom/views/Text/RCTText.js"],"names":["styleElement","document","createElement","innerHTML","TextDefaults","fontFamily","fontSize","lineHeight","fontWeight","letterSpacing","head","appendChild","RCTText","bridge","pointerEvents","updateHostStyle","position","display","contain","opacity","whiteSpace","boxDecorationBreak","updateChildContainerStyle","width","isHighlighted","disabled","textDecorationColor","textDecorationLine","textDecorationStyle","_selectable","_touchable","_disabled","_isHighlighted","updateDerivedPointerEvents","value","color","getAlpha","setAlpha","darken","_highlightedBackgroundColor","toRgbString","a","r","g","b","stringValue","style","indexOf","stack","split","join","updatePointerEvents","updateDerivedTouchable","textAlign","touchable","fontStyle","overflow","textOverflow","undefined","RCTView","customElements","define"],"mappings":"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","sourcesContent":["/** @flow */\n\nimport tinycolor from \"tinycolor2\";\n\nimport type { Frame } from \"InternalLib\";\nimport type RCTBridge from \"RCTBridge\";\nimport RCTView from \"RCTView\";\nimport RCTRawText from \"RCTRawText\";\nimport {\n  defaults as TextDefaults,\n  defaultFontSize,\n  defaultFontStack\n} from \"RCTSharedTextValues\";\nimport ColorArrayFromHexARGB from \"ColorArrayFromHexARGB\";\n\n// inject default font stylesheet\n(() => {\n  const styleElement = document.createElement(\"style\");\n  styleElement.innerHTML = `\n    body, html {\n      font-family: ${TextDefaults.fontFamily};\n      font-size: ${TextDefaults.fontSize};\n      line-height: ${TextDefaults.lineHeight};\n      font-weight: ${TextDefaults.fontWeight};\n      letter-spacing: ${TextDefaults.letterSpacing};\n    }\n  `;\n  document.head && document.head.appendChild(styleElement);\n})();\n\nclass RCTText extends RCTView {\n  _selectable: boolean;\n  _disabled: boolean;\n  _isHighlighted: ?boolean;\n  _highlightedBackgroundColor: ?string;\n\n  constructor(bridge: RCTBridge) {\n    super(bridge);\n\n    this.pointerEvents = \"auto\";\n\n    this.updateHostStyle({\n      position: \"static\",\n      display: \"inline\",\n      contain: \"none\",\n      opacity: \"1.0\",\n      whiteSpace: \"pre-wrap\",\n      boxDecorationBreak: \"clone\"\n    });\n\n    this.updateChildContainerStyle({\n      display: \"inline\",\n      contain: \"none\",\n      position: \"static\",\n      width: \"100%\"\n    });\n\n    this.isHighlighted = null;\n    this.disabled = true;\n    this.fontFamily = null;\n    this.fontSize = null;\n    this.lineHeight = null;\n    this.textDecorationColor = null;\n    this.textDecorationLine = null;\n    this.textDecorationStyle = null;\n  }\n\n  set backgroundColor(value: number | string) {\n    super.backgroundColor = value;\n\n    const color = tinycolor(value);\n    if (color.getAlpha() < 0.3) {\n      color.setAlpha(0.3);\n    }\n\n    color.darken();\n    this._highlightedBackgroundColor = color.toRgbString();\n  }\n\n  set color(value: number | string) {\n    if (typeof value === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(value);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.style.color = stringValue;\n    } else {\n      this.style.color = value;\n    }\n  }\n\n  get frame(): Frame {\n    return super.frame;\n  }\n\n  set frame(value: Frame) {\n    Object.assign(this, value);\n\n    // if text's frame is set revert back to block positioning\n    this.updateHostStyle({\n      position: \"absolute\",\n      display: \"inline-block\"\n    });\n\n    this.updateChildContainerStyle({\n      display: \"inline-block\"\n    });\n  }\n\n  set accessible(value: boolean) {\n    // no-op\n  }\n\n  set fontFamily(value: ?string) {\n    value = value ? value : \"inherit\";\n    if (value.indexOf(\"System\") > -1) {\n      const stack = value.split(/\\s*,\\s*/);\n      stack[stack.indexOf(\"System\")] = TextDefaults.fontFamily;\n      value = stack.join(\", \");\n    }\n    this.style.fontFamily = value;\n  }\n\n  set fontSize(value: ?number) {\n    this.style.fontSize = value ? `${value}px` : \"inherit\";\n  }\n\n  get selectable(): boolean {\n    return this._selectable;\n  }\n\n  set textAlign(value: ?string) {\n    this.style.textAlign = value ? value : \"inherit\";\n  }\n\n  updatePointerEvents() {\n    this.pointerEvents =\n      (this._selectable || this._touchable) && !this._disabled\n        ? \"auto\"\n        : \"box-none\";\n  }\n\n  set disabled(value: boolean) {\n    this.updatePointerEvents();\n    this.updateDerivedTouchable();\n  }\n\n  set isHighlighted(value: ?boolean) {\n    this._isHighlighted = value;\n    if (value !== null) {\n      this.touchable = true;\n      this.updateHostStyle(\n        \"backgroundImage\",\n        value\n          ? \"linear-gradient(-100deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2))\"\n          : \"\"\n      );\n    } else {\n      this.touchable = false;\n    }\n    this.updatePointerEvents();\n    this.updateDerivedTouchable();\n  }\n\n  updateDerivedTouchable() {\n    this._touchable =\n      (this._isHighlighted != null || this._selectable) && !this._disabled;\n    this.updateDerivedPointerEvents();\n  }\n\n  set selectable(value: boolean) {\n    this._selectable = value;\n\n    this.updateHostStyle(\"userSelect\", value ? \"text\" : \"none\");\n    this.updatePointerEvents();\n    this.updateDerivedTouchable();\n  }\n\n  set fontWeight(value: ?string) {\n    this.style.fontWeight = value ? value : TextDefaults.fontWeight;\n  }\n\n  set fontStyle(value: ?string) {\n    this.style.fontStyle = value ? value : TextDefaults.fontStyle;\n  }\n\n  set letterSpacing(value: ?number) {\n    this.style.letterSpacing = value ? `${value}px` : \"inherit\";\n  }\n\n  set textDecorationLine(value: ?string) {\n    this.updateChildContainerStyle(\n      \"textDecorationLine\",\n      value ? value : \"none\"\n    );\n  }\n\n  set textDecorationStyle(value: ?string) {\n    this.updateChildContainerStyle(\n      \"textDecorationStyle\",\n      value ? value : \"solid\"\n    );\n  }\n\n  set textDecorationColor(value: ?string) {\n    if (value != null) {\n      this.updateChildContainerStyle(\"textDecorationColor\", value);\n    } else {\n      this.updateChildContainerStyle(\"textDecorationColor\", \"currentcolor\");\n    }\n  }\n\n  set lineHeight(value: ?number) {\n    this.updateHostStyle(\"lineHeight\", value ? `${value}px` : \"inherit\");\n  }\n\n  // TODO: ellipsizeMode\n\n  set numberOfLines(value: ?number) {\n    if (value === 1) {\n      this.updateHostStyle({\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\",\n        textOverflow: \"ellipsis\"\n      });\n      this.updateChildContainerStyle({\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\"\n      });\n    } else {\n      this.updateHostStyle({\n        overflow: \"visible\",\n        whiteSpace: \"pre-wrap\",\n        textOverflow: undefined\n      });\n      this.updateChildContainerStyle({\n        overflow: \"visible\",\n        textOverflow: undefined\n      });\n    }\n  }\n}\n\ncustomElements.define(\"rct-text\", RCTText);\n\nexport default RCTText;\n"],"file":"RCTText.js"}