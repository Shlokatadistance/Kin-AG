{"version":3,"sources":["../../ReactDom/modules/RCTAppState.js"],"names":["hidden","visibilityChange","document","msHidden","webkitHidden","RCTAppState","didUpdateVisibility","bridge","uiManager","requestTick","sendEventWithName","app_state","currentBackgroundState","addEventListener","removeEventListener","initialAppState","callbackId","callbackFromId","RCTEventEmitter","moduleName"],"mappings":"6nBAGA,sFAEA,GAAIA,CAAAA,MAAJ,CAAYC,gBAAZ,CACA,GAAI,MAAOC,CAAAA,QAAQ,CAACF,MAAhB,GAA2B,WAA/B,CAA4C,CAE1CA,MAAM,CAAG,QAAT,CACAC,gBAAgB,CAAG,kBAAnB,CAED,CALD,IAKO,IAAI,MAAOC,CAAAA,QAAQ,CAACC,QAAhB,GAA6B,WAAjC,CAA8C,CACnDH,MAAM,CAAG,UAAT,CACAC,gBAAgB,CAAG,oBAAnB,CAED,CAJM,IAIA,IAAI,MAAOC,CAAAA,QAAQ,CAACE,YAAhB,GAAiC,WAArC,CAAkD,CACvDJ,MAAM,CAAG,cAAT,CACAC,gBAAgB,CAAG,wBAAnB,CACD,C,GAEKI,CAAAA,W,scAwCJC,mB,CAAsB,UAAM,CAC1B,MAAKC,MAAL,CAAYC,SAAZ,CAAsBC,WAAtB,GACA,MAAKC,iBAAL,CAAuB,mBAAvB,CAA4C,CAC1CC,SAAS,CAAE,MAAKC,sBAAL,EAD+B,CAA5C,EAGD,C,2GA1CgB,CACfV,QAAQ,CAACW,gBAAT,CACEZ,gBADF,CAEE,KAAKK,mBAFP,CAGE,KAHF,EAKD,C,qDAEe,CACdJ,QAAQ,CAACY,mBAAT,CACEb,gBADF,CAEE,KAAKK,mBAFP,CAGE,KAHF,EAKD,C,uEAEwB,CAEvB,GAAIJ,QAAQ,CAACF,MAAD,CAAR,EAAoB,IAAxB,CAA8B,CAC5B,MAAO,SAAP,CACD,CACD,GAAIE,QAAQ,CAACF,MAAD,CAAZ,CAAsB,CACpB,MAAO,YAAP,CACD,CACD,MAAO,QAAP,CACD,C,6DAEmB,CAClB,MAAO,CACLe,eAAe,CAAE,KAAKH,sBAAL,EADZ,CAAP,CAGD,C,yDAEiB,CAChB,MAAO,CAAC,mBAAD,CAAP,CACD,C,gEASmBI,U,CAAoB,CACtC,KAAKT,MAAL,CAAYU,cAAZ,CAA2BD,UAA3B,EAAuC,CACrCL,SAAS,CAAE,KAAKC,sBAAL,EAD0B,CAAvC,EAGD,C,yBAnDuBM,8B,EAApBb,W,CACGc,U,CAAa,a,cAqDPd,W","sourcesContent":["/** @flow */\n\nimport type RCTBridge from \"RCTBridge\";\nimport RCTEventEmitter from \"RCTNativeEventEmitter\";\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== \"undefined\") {\n  // Opera 12.10 and Firefox 18 and later support\n  hidden = \"hidden\";\n  visibilityChange = \"visibilitychange\";\n  // $FlowFixMe: libdef\n} else if (typeof document.msHidden !== \"undefined\") {\n  hidden = \"msHidden\";\n  visibilityChange = \"msvisibilitychange\";\n  // $FlowFixMe: libdef\n} else if (typeof document.webkitHidden !== \"undefined\") {\n  hidden = \"webkitHidden\";\n  visibilityChange = \"webkitvisibilitychange\";\n}\n\nclass RCTAppState extends RCTEventEmitter {\n  static moduleName = \"RCTAppState\";\n\n  startObserving() {\n    document.addEventListener(\n      visibilityChange,\n      this.didUpdateVisibility,\n      false\n    );\n  }\n\n  stopObserving() {\n    document.removeEventListener(\n      visibilityChange,\n      this.didUpdateVisibility,\n      false\n    );\n  }\n\n  currentBackgroundState() {\n    // $FlowFixMe\n    if (document[hidden] == null) {\n      return \"unknown\";\n    }\n    if (document[hidden]) {\n      return \"background\";\n    }\n    return \"active\";\n  }\n\n  constantsToExport() {\n    return {\n      initialAppState: this.currentBackgroundState()\n    };\n  }\n\n  supportedEvents() {\n    return [\"appStateDidChange\"];\n  }\n\n  didUpdateVisibility = () => {\n    this.bridge.uiManager.requestTick();\n    this.sendEventWithName(\"appStateDidChange\", {\n      app_state: this.currentBackgroundState()\n    });\n  };\n\n  $getCurrentAppState(callbackId: number) {\n    this.bridge.callbackFromId(callbackId)({\n      app_state: this.currentBackgroundState()\n    });\n  }\n}\n\nexport default RCTAppState;\n"],"file":"RCTAppState.js"}