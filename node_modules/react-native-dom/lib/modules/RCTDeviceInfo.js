var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _resizeObserverPolyfill=_interopRequireDefault(require("resize-observer-polyfill"));var _RCTNativeEventEmitter=_interopRequireDefault(require("./RCTNativeEventEmitter"));var RCTDeviceInfo=function(_RCTEventEmitter){(0,_inherits2.default)(RCTDeviceInfo,_RCTEventEmitter);function RCTDeviceInfo(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,RCTDeviceInfo);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(RCTDeviceInfo)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.didUpdateDimensions=function(){_this.sendEventWithName("didUpdateDimensions",_this.exportedDimensions());};_this.resizeObserver=new _resizeObserverPolyfill.default(_this.didUpdateDimensions);return _this;}(0,_createClass2.default)(RCTDeviceInfo,[{key:"startObserving",value:function startObserving(){this.resizeObserver.observe(this.bridge.parent);window.matchMedia("screen and (min-resolution: 2dppx)").addListener(this.didUpdateDimensions);}},{key:"stopObserving",value:function stopObserving(){this.resizeObserver.unobserve(this.bridge.parent);window.matchMedia("screen and (min-resolution: 2dppx)").removeEventListener(this.didUpdateDimensions);}},{key:"constantsToExport",value:function constantsToExport(){return{Dimensions:this.exportedDimensions()};}},{key:"supportedEvents",value:function supportedEvents(){return["didUpdateDimensions"];}},{key:"exportedDimensions",value:function exportedDimensions(){var dims={width:Math.ceil(this.bridge.parent.offsetWidth),height:Math.ceil(this.bridge.parent.offsetHeight),scale:this.getDevicePixelRatio(),fontScale:1};return{window:dims,screen:dims};}},{key:"getDevicePixelRatio",value:function getDevicePixelRatio(){var ratio=1;if(window.screen.systemXDPI!==undefined&&window.screen.logicalXDPI!==undefined&&window.screen.systemXDPI>window.screen.logicalXDPI){ratio=window.screen.systemXDPI/window.screen.logicalXDPI;}else if(window.devicePixelRatio!==undefined){ratio=window.devicePixelRatio;}return Math.min(ratio,2);}}]);return RCTDeviceInfo;}(_RCTNativeEventEmitter.default);RCTDeviceInfo.moduleName="RCTDeviceInfo";var _default=RCTDeviceInfo;exports.default=_default;
//# sourceMappingURL=RCTDeviceInfo.js.map