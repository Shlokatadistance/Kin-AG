var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _invariant=_interopRequireDefault(require("invariant"));var _RCTUIManagerObserverCoordinator=_interopRequireDefault(require("./RCTUIManagerObserverCoordinator"));var _RCTModule2=_interopRequireWildcard(require("./../bridge/RCTModule"));var _UIView=_interopRequireDefault(require("./../base/UIView"));var _RCTView=_interopRequireDefault(require("./../views/RCTView"));var _RCTRootView=_interopRequireDefault(require("./../bridge/RCTRootView"));var _RCTDeviceInfo=_interopRequireDefault(require("./RCTDeviceInfo"));var _RCTLayoutAnimationManager=_interopRequireDefault(require("./LayoutAnimation/RCTLayoutAnimationManager"));var _RCTComponentData=_interopRequireDefault(require("./../views/RCTComponentData"));var _CanUse=_interopRequireDefault(require("./../utils/CanUse"));var _Instrument=_interopRequireDefault(require("./../utils/Instrument"));var _RCTShadowView=_interopRequireDefault(require("./../views/RCTShadowView"));var _RCTRootShadowView=_interopRequireDefault(require("./../views/RCTRootShadowView"));var _RCTShadowText=_interopRequireDefault(require("./../views/Text/RCTShadowText"));var _RCTNativeViewHierarchyOptimizer=_interopRequireDefault(require("./RCTNativeViewHierarchyOptimizer"));var rootTagCounter=0;var RCTUIManager=function(_RCTModule){(0,_inherits2.default)(RCTUIManager,_RCTModule);function RCTUIManager(bridge){var _this;(0,_classCallCheck2.default)(this,RCTUIManager);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(RCTUIManager).call(this,bridge));_this.pendingUIBlocks=[];_this.didUpdateDimensions=function(_ref){var _ref$window=_ref.window,width=_ref$window.width,height=_ref$window.height,scale=_ref$window.scale;var _loop=function _loop(rootViewTag){var rootView=_this.viewRegistry.get(rootViewTag);(0,_invariant.default)(rootView,"Root view must exist");(0,_invariant.default)(rootView instanceof _RCTRootView.default,"View must be an RCTRootView");_this.addUIBlock(function(){_this.setAvailableSize({width:width,height:height},scale,rootView);});};for(var _iterator=_this.rootViewTags,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol==="function"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator"]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++];}else{_i=_iterator.next();if(_i.done)break;_ref2=_i.value;}var rootViewTag=_ref2;_loop(rootViewTag);}_this.requestTick();};_this.shadowViewRegistry=new Map();_this.viewRegistry=new Map();_this.rootViewTags=new Set();_this.componentDataByName=new Map();_this.bridge.moduleClasses.forEach(function(moduleClass){if(moduleClass.__isViewManager){var componentData=new _RCTComponentData.default(moduleClass,_this.bridge);_this.componentDataByName.set(componentData.name,componentData);}});_this.layoutAnimationManager=new _RCTLayoutAnimationManager.default((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));_this.observerCoordinator=new _RCTUIManagerObserverCoordinator.default();_this.nativeViewHierarchyOptimizer=new _RCTNativeViewHierarchyOptimizer.default((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)));(0,_invariant.default)(_this.bridge,"Bridge must be set");var deviceInfoModule=_this.bridge.modulesByName["DeviceInfo"];deviceInfoModule.addListener("didUpdateDimensions",_this.didUpdateDimensions);return _this;}(0,_createClass2.default)(RCTUIManager,[{key:"registerRootView",value:function registerRootView(rootView){var reactTag=rootView.reactTag;var availableSize=rootView.availableSize;this.viewRegistry.set(reactTag,rootView);var shadowView=new _RCTRootShadowView.default(this.bridge);shadowView.availableSize=availableSize;shadowView.reactTag=reactTag;shadowView.viewName=rootView.constructor.name;shadowView.isLayoutOnly=false;var pixelRatio=this.bridge.deviceInfo.getDevicePixelRatio();shadowView.updatePointScaleFactor(pixelRatio);this.shadowViewRegistry.set(reactTag,shadowView);this.rootViewTags.add(reactTag);}},{key:"setAvailableSize",value:function setAvailableSize(size,scale,rootView){rootView.width=size.width;rootView.height=size.height;var reactTag=rootView.reactTag;var rootShadowView=this.shadowViewRegistry.get(reactTag);if(rootShadowView&&rootShadowView instanceof _RCTRootShadowView.default)rootShadowView.updateAvailableSize(size)&&rootShadowView.updatePointScaleFactor(scale);}},{key:"setLocalDataForView",value:function setLocalDataForView(localData,view){var tag=view.reactTag;var shadowView=this.shadowViewRegistry.get(tag);if(shadowView==null){console.warn("Could not locate shadow view with tag "+tag+", this is probably caused by a temporary inconsistency between native views and shadow views.");return;}shadowView.localData=localData;this.requestTick();}},{key:"rootTagForReactTag",value:function rootTagForReactTag(reactTag){var view=this.shadowViewRegistry.get(reactTag);(0,_invariant.default)(view,"No shadow view found with tag "+reactTag);return view.rootTag;}},{key:"viewNameForReactTag",value:function viewNameForReactTag(reactTag){var shadowView=this.shadowViewRegistry.get(reactTag);(0,_invariant.default)(shadowView,"No such shadowView with id "+reactTag);return shadowView.viewName;}},{key:"purgeView",value:function purgeView(reactTag){if(this.layoutAnimationManager.isPending()){var view=this.viewRegistry.get(reactTag);if(view&&view.reactSuperview){view.reactSuperview.removeReactSubview(view);}this.layoutAnimationManager.queueRemovedNode(reactTag);}else{this.addUIBlock(function(uiManager,viewRegistry){var view=viewRegistry.get(reactTag);viewRegistry.delete(reactTag);if(view){view.purge();}});}}},{key:"frame",value:function frame(){var _this2=this;return _regenerator.default.async(function frame$(_context){while(1){switch(_context.prev=_context.next){case 0:this.observerCoordinator.uiManagerWillPerformLayout(this);this.rootViewTags.forEach(function(rootTag){var rootShadowView=_this2.shadowViewRegistry.get(rootTag);if(rootShadowView!=null&&rootShadowView.isDirty){(0,_invariant.default)(rootShadowView instanceof _RCTRootShadowView.default,"attempting to recalculate from shadowView that isn't root");var layoutChanges=(0,_Instrument.default)("⚛️ Layout",function(){return rootShadowView.recalculateLayout();});_this2.applyLayoutChanges(layoutChanges);}});this.observerCoordinator.uiManagerDidPerformLayout(this);if(this.layoutAnimationManager.isPending()){(0,_Instrument.default)("⚛️ LayoutAnimation Construction",function(){_this2.layoutAnimationManager.applyLayoutChanges();});}this.observerCoordinator.uiManagerWillFlushBlocks(this);(0,_Instrument.default)("⚛️ Style",function(){if(_this2.pendingUIBlocks.length>0){var uiBlocks=(0,_toConsumableArray2.default)(_this2.pendingUIBlocks);_this2.pendingUIBlocks=[];uiBlocks.forEach(function(block){block.call(null,_this2,_this2.viewRegistry);});_this2.requestTick();}});case 6:case"end":return _context.stop();}}},null,this);}},{key:"shouldContinue",value:function shouldContinue(){return this.pendingUIBlocks.length!==0;}},{key:"requestTick",value:function requestTick(){var _this3=this;this.rootViewTags.forEach(function(rootViewTag){var rootView=_this3.viewRegistry.get(rootViewTag);(0,_invariant.default)(rootView&&rootView instanceof _RCTRootView.default,"RootView (with ID "+rootViewTag+") does not exist");rootView.requestTick();});}},{key:"applyLayoutChanges",value:function applyLayoutChanges(layoutChanges){var _this4=this;layoutChanges.forEach(function(layoutChange){var reactTag=layoutChange.reactTag,layout=layoutChange.layout;var shadowView=_this4.shadowViewRegistry.get(reactTag);(0,_invariant.default)(shadowView,"View with reactTag "+reactTag+" does not exist");_this4.nativeViewHierarchyOptimizer.handleUpdateLayout(shadowView);});this.nativeViewHierarchyOptimizer.onBatchComplete();}},{key:"updateLayout",value:function updateLayout(reactTag,layout){if(this.layoutAnimationManager.isPending()){var shadowView=this.shadowViewRegistry.get(reactTag);(0,_invariant.default)(shadowView,"Shadow View with reactTag "+reactTag+" does not exist");(0,_invariant.default)(shadowView.measurement,"Shadow View with tag "+reactTag+" has no measurement calculated");this.layoutAnimationManager.addLayoutChange({reactTag:reactTag,layout:layout,previousMeasurement:shadowView.prevMeasurement,nextMeasurement:shadowView.measurement});}else{var view=this.viewRegistry.get(reactTag);(0,_invariant.default)(view,"View with reactTag "+reactTag+" does not exist");view.frame=layout;}}},{key:"measure",value:function measure(reactTag){return this.$measure(reactTag);}},{key:"$measure",value:function $measure(reactTag,callbackId){var _this5=this;return new Promise(function(resolve,reject){_this5.addUIBlock(function(){var shadowView=_this5.shadowViewRegistry.get(reactTag);var view=_this5.viewRegistry.get(reactTag);if(!shadowView||!shadowView.measurement){return resolve();}var _shadowView$measureGl=shadowView.measureGlobal(),globalX=_shadowView$measureGl.globalX,globalY=_shadowView$measureGl.globalY;(0,_invariant.default)(shadowView.previousLayout,"Shadow view has no previous layout");var _shadowView$previousL=shadowView.previousLayout,left=_shadowView$previousL.left,top=_shadowView$previousL.top,width=_shadowView$previousL.width,height=_shadowView$previousL.height;if(callbackId!=null){_this5.bridge.callbackFromId(callbackId)(left,top,width,height,globalX,globalY);}resolve({left:left,top:top,width:width,height:height,globalX:globalX,globalY:globalY});});});}},{key:"$measureInWindow",value:function $measureInWindow(reactTag,callbackId){var view,_view$getBoundingClie,left,top,width,height;return _regenerator.default.async(function $measureInWindow$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:view=this.viewRegistry.get(reactTag);(0,_invariant.default)(view,"No such view with tag: "+reactTag);_view$getBoundingClie=view.getBoundingClientRect(),left=_view$getBoundingClie.left,top=_view$getBoundingClie.top,width=_view$getBoundingClie.width,height=_view$getBoundingClie.height;this.bridge.callbackFromId(callbackId)(left,top,width,height);case 4:case"end":return _context2.stop();}}},null,this);}},{key:"$setJSResponder",value:function $setJSResponder(reactTag){this.jsResponder=this.viewRegistry.get(reactTag);if(!this.jsResponder){console.error("Invalid view set to be the JS responder - tag "+reactTag);}}},{key:"$clearJSResponder",value:function $clearJSResponder(){this.jsResponder=null;}},{key:"$configureNextLayoutAnimation",value:function $configureNextLayoutAnimation(config,onAnimationDidEnd){if(!_CanUse.default.matchMedia||!window.matchMedia("(prefers-reduced-motion: reduce)").matches){this.layoutAnimationManager.configureNext(config,this.bridge.callbackFromId(onAnimationDidEnd));}}},{key:"addUIBlock",value:function addUIBlock(block){if(block==null||this.viewRegistry==null){return;}block.call(null,this,this.viewRegistry);}},{key:"prependUIBlock",value:function prependUIBlock(block){if(!block){return;}block.call(null,this,this.viewRegistry);}},{key:"$setChildren",value:function $setChildren(containerTag,reactTags){RCTUIManager.RCTSetChildren(containerTag,reactTags,this.shadowViewRegistry);var nodeToManage=this.shadowViewRegistry.get(containerTag);(0,_invariant.default)(nodeToManage,"No such ShadowView with tag "+containerTag);if(!nodeToManage.isVirtual()){this.nativeViewHierarchyOptimizer.handleSetChildren(nodeToManage,reactTags);}else{RCTUIManager.RCTSetChildren(containerTag,reactTags,this.viewRegistry);}}},{key:"setChildren",value:function setChildren(containerTag,reactTags){RCTUIManager.RCTSetChildren(containerTag,reactTags,this.viewRegistry);}},{key:"$createView",value:function $createView(reactTag,viewName,rootTag,props){var componentData=this.componentDataByName.get(viewName);(0,_invariant.default)(componentData,"No component found for view with name "+viewName);var shadowView=componentData.createShadowView(reactTag);if(shadowView!=null){shadowView.rootTag=rootTag;shadowView.viewName=viewName;componentData.setPropsForShadowView(props,shadowView);this.shadowViewRegistry.set(reactTag,shadowView);}if(this.layoutAnimationManager.isPending())this.layoutAnimationManager.queueAddedNode(reactTag);if(!shadowView.isVirtual()){this.nativeViewHierarchyOptimizer.handleCreateView(shadowView,props);}else{this.createView(reactTag,viewName,props);}}},{key:"createView",value:function createView(reactTag,viewName,props){var componentData=this.componentDataByName.get(viewName);(0,_invariant.default)(componentData,"No component found for view with name "+viewName);var view=componentData.createView(reactTag);if(view!=null){props&&componentData.setPropsForView(props,view);this.viewRegistry.set(reactTag,view);}}},{key:"$updateView",value:function $updateView(reactTag,viewName,updatedProps){var componentData=this.componentDataByName.get(viewName);(0,_invariant.default)(componentData,"No component found for view with name "+viewName);var shadowView=this.shadowViewRegistry.get(reactTag);if(shadowView){componentData.setPropsForShadowView(updatedProps,shadowView);this.nativeViewHierarchyOptimizer.handleUpdateView(shadowView,viewName,updatedProps);}}},{key:"updateView",value:function updateView(reactTag,viewName,updatedProps){var componentData=this.componentDataByName.get(viewName);(0,_invariant.default)(componentData,"No component found for view with name "+viewName);var view=this.viewRegistry.get(reactTag);if(view){componentData.setPropsForView(updatedProps,view);}}},{key:"synchronouslyUpdateView",value:function synchronouslyUpdateView(reactTag,viewName,props){var componentData=this.componentDataByName.get(viewName);(0,_invariant.default)(componentData,"No component found for view with name "+viewName);var view=this.viewRegistry.get(reactTag);if(view){componentData.setPropsForView(props,view);}}},{key:"$replaceExistingNonRootView",value:function $replaceExistingNonRootView(reactTag,newReactTag){var shadowView=this.shadowViewRegistry.get(reactTag);(0,_invariant.default)(shadowView,"shadowView (for ID "+reactTag+") not found");var superShadowView=shadowView.reactSuperview;(0,_invariant.default)(superShadowView,"shadowView super (of ID "+reactTag+") not found");var indexOfView=superShadowView.reactSubviews.indexOf(shadowView);(0,_invariant.default)(indexOfView!==-1,"View's superview does't claim it as subview");var removeAtIndices=[indexOfView];var addTags=[newReactTag];this.$manageChildren(superShadowView.reactTag,null,null,addTags,removeAtIndices,removeAtIndices);}},{key:"$findSubviewIn",value:function $findSubviewIn(reactTag,atPoint,callbackId){var _atPoint,x,y,shadowView,targetReactTag,measurement,globalX,globalY,width,height;return _regenerator.default.async(function $findSubviewIn$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_atPoint=(0,_slicedToArray2.default)(atPoint,2),x=_atPoint[0],y=_atPoint[1];shadowView=this.shadowViewRegistry.get(reactTag);(0,_invariant.default)(shadowView,"No such view with tag "+reactTag);targetReactTag=shadowView.reactTagAtPoint({x:x,y:y});_context3.next=6;return _regenerator.default.awrap(this.measure(targetReactTag));case 6:measurement=_context3.sent;(0,_invariant.default)(measurement,"View with tag "+targetReactTag+" has no measurement");globalX=measurement.globalX,globalY=measurement.globalY,width=measurement.width,height=measurement.height;this.bridge.callbackFromId(callbackId)(targetReactTag,globalX,globalY,width,height);case 10:case"end":return _context3.stop();}}},null,this);}},{key:"$manageChildren",value:function $manageChildren(tag,moveFrom,moveTo,addChildTags,addAtIndices,removeFrom){var shadowViewToManage=this.shadowViewRegistry.get(tag);if(!shadowViewToManage)return;var numToMove=!moveFrom?0:moveFrom.length;var viewsToAdd=[];var indicesToRemove=[];var tagsToRemove=[];var tagsToDelete=[];if(moveFrom&&moveTo){for(var i=0;i<moveFrom.length;i++){var moveFromIndex=moveFrom[i];var tagToMove=shadowViewToManage.reactSubviews[moveFromIndex].reactTag;viewsToAdd[i]={tag:tagToMove,index:moveTo[i]};indicesToRemove[i]=moveFromIndex;tagsToRemove[i]=tagToMove;}}if(addChildTags){for(var _i2=0;_i2<addChildTags.length;_i2++){var viewTagToAdd=addChildTags[_i2];var indexToAddAt=addAtIndices[_i2];viewsToAdd[numToMove+_i2]={tag:viewTagToAdd,index:indexToAddAt};}}if(removeFrom){for(var _i3=0;_i3<removeFrom.length;_i3++){var indexToRemove=removeFrom[_i3];if(shadowViewToManage.reactSubviews[indexToRemove]){var tagToRemove=shadowViewToManage.reactSubviews[indexToRemove].reactTag;indicesToRemove[numToMove+_i3]=indexToRemove;tagsToRemove[numToMove+_i3]=tagToRemove;tagsToDelete[_i3]=tagToRemove;}}}viewsToAdd.sort(function(a,b){return a.index-b.index;});indicesToRemove.sort(function(a,b){return a-b;});for(var _i4=indicesToRemove.length-1;_i4>=0;_i4--){var childIndex=indicesToRemove[_i4];var shadowSubView=undefined;if(shadowViewToManage instanceof _RCTShadowText.default){shadowSubView=shadowViewToManage.textChildren[childIndex];}else{shadowSubView=shadowViewToManage.reactSubviews[childIndex];}if(shadowSubView){shadowViewToManage.removeReactSubview(shadowSubView);if(this.layoutAnimationManager.isPending()){shadowSubView.reactSuperview=shadowViewToManage;}}}for(var _i5=0;_i5<viewsToAdd.length;_i5++){var _viewsToAdd$_i=viewsToAdd[_i5],tagToAdd=_viewsToAdd$_i.tag,indexToAdd=_viewsToAdd$_i.index;var _shadowSubView=this.shadowViewRegistry.get(tagToAdd);if(_shadowSubView){shadowViewToManage.insertReactSubviewAtIndex(_shadowSubView,indexToAdd);}}if(!shadowViewToManage.isVirtual()){this.nativeViewHierarchyOptimizer.handleManageChildren(shadowViewToManage,indicesToRemove,tagsToRemove,viewsToAdd,tagsToDelete);}else{this.manageChildren(tag,indicesToRemove,viewsToAdd,tagsToDelete);}for(var _i6=0;_i6<tagsToDelete.length;_i6++){var reactTag=tagsToDelete[_i6];var shadowView=this.shadowViewRegistry.get(tagsToDelete[_i6]);if(shadowView){!this.layoutAnimationManager.isPending()&&this.shadowViewRegistry.delete(reactTag);shadowView.purge();}}}},{key:"manageChildren",value:function manageChildren(tag,indicesToRemove,viewsToAdd,tagsToDelete){var viewToManage=this.viewRegistry.get(tag);(0,_invariant.default)(viewToManage,"No such view found with tag "+tag);if(indicesToRemove!=null){for(var i=indicesToRemove.length-1;i>=0;i--){var indexToRemove=indicesToRemove[i];var viewToRemove=viewToManage.reactSubviews[indexToRemove];if(viewToRemove){viewToManage.removeReactSubview(viewToRemove);}}}if(viewsToAdd!=null){for(var _i7=0;_i7<viewsToAdd.length;_i7++){var viewAtIndex=viewsToAdd[_i7];var viewToAdd=this.viewRegistry.get(viewAtIndex.tag);if(viewToAdd!=null){viewToManage.insertReactSubviewAtIndex(viewToAdd,viewAtIndex.index);}}}if(tagsToDelete!=null){for(var _i8=0;_i8<tagsToDelete.length;_i8++){var tagToDelete=tagsToDelete[_i8];this.purgeView(tagToDelete);}}}},{key:"$dispatchViewManagerCommand",value:function $dispatchViewManagerCommand(reactTag,commandID,commandArgs){var shadowView=this.shadowViewRegistry.get(reactTag);(0,_invariant.default)(shadowView,"No such shadow view with tag "+reactTag);var componentData=this.componentDataByName.get(shadowView.viewName);(0,_invariant.default)(componentData,"No such componentData for name "+shadowView.viewName);var managerClass=componentData.managerClass;var module=this.bridge.moduleForClass(managerClass);var methodName=module.functionMap[commandID];var args=[reactTag].concat((0,_toConsumableArray2.default)(commandArgs));var manager=this.bridge.moduleForClass(managerClass);manager.functionMap[commandID].apply(manager,args);}},{key:"$focus",value:function $focus(reactTag){var viewToFocus=this.viewRegistry.get(reactTag);(0,_invariant.default)(viewToFocus,"No view found with react tag: "+reactTag);if(typeof viewToFocus.focus==="function"){viewToFocus.focus();}else{console.warn("View with tag '"+reactTag+"' cannot be focused");}}},{key:"$blur",value:function $blur(reactTag){var viewToBlur=this.viewRegistry.get(reactTag);(0,_invariant.default)(viewToBlur,"No view found with react tag: "+reactTag);if(typeof viewToBlur.blur==="function"){viewToBlur.blur();}else{console.warn("View with tag '"+reactTag+"' cannot be blurred");}}},{key:"constantsToExport",value:function constantsToExport(){var constants={};var bubblingEvents={};var directEvents={};for(var _iterator2=this.componentDataByName,_isArray2=Array.isArray(_iterator2),_i9=0,_iterator2=_isArray2?_iterator2:_iterator2[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref5;if(_isArray2){if(_i9>=_iterator2.length)break;_ref5=_iterator2[_i9++];}else{_i9=_iterator2.next();if(_i9.done)break;_ref5=_i9.value;}var _ref6=_ref5;var _ref4=(0,_slicedToArray2.default)(_ref6,2);var _name=_ref4[0];var _componentData=_ref4[1];var moduleConstants={};var bubblingEventTypes={};var directEventTypes={};moduleConstants.Manager=(0,_RCTModule2.bridgeModuleNameForClass)(_componentData.managerClass);var viewConfig=_componentData.viewConfig;moduleConstants.NativeProps=viewConfig.propTypes;moduleConstants.baseModuleName=viewConfig.baseModuleName;for(var _iterator3=viewConfig.directEvents,_isArray3=Array.isArray(_iterator3),_i10=0,_iterator3=_isArray3?_iterator3:_iterator3[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref7;if(_isArray3){if(_i10>=_iterator3.length)break;_ref7=_iterator3[_i10++];}else{_i10=_iterator3.next();if(_i10.done)break;_ref7=_i10.value;}var _eventName2=_ref7;if(!directEvents[_eventName2]){directEvents[_eventName2]={registrationName:"on"+_eventName2.substring(3)};}directEventTypes[_eventName2]=directEvents[_eventName2];}moduleConstants.directEventTypes=directEventTypes;for(var _iterator4=viewConfig.bubblingEvents,_isArray4=Array.isArray(_iterator4),_i11=0,_iterator4=_isArray4?_iterator4:_iterator4[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var _ref8;if(_isArray4){if(_i11>=_iterator4.length)break;_ref8=_iterator4[_i11++];}else{_i11=_iterator4.next();if(_i11.done)break;_ref8=_i11.value;}var _eventName3=_ref8;if(!bubblingEvents[_eventName3]){var bubbleName="on"+_eventName3.substring(3);bubblingEvents[_eventName3]={phasedRegistrationNames:{bubbled:bubbleName,captured:bubbleName+"Capture"}};}bubblingEventTypes[_eventName3]=bubblingEvents[_eventName3];}moduleConstants.bubblingEventTypes=bubblingEventTypes;constants[_name]=moduleConstants;}return constants;}},{key:"allocateRootTag",get:function get(){var tag=rootTagCounter;rootTagCounter++;return tag*10+1;}}],[{key:"RCTSetChildren",value:function RCTSetChildren(containerTag,reactTags,registry){var container=registry.get(containerTag);var index=0;reactTags.forEach(function(reactTag){var view=registry.get(reactTag);(0,_invariant.default)(container,"No container view found with id: "+containerTag);(0,_invariant.default)(view,"No view found with id: "+reactTag);container.insertReactSubviewAtIndex(view,index++);});}}]);return RCTUIManager;}(_RCTModule2.default);RCTUIManager.moduleName="RCTUIManager";var _default=RCTUIManager;exports.default=_default;
//# sourceMappingURL=RCTUIManager.js.map