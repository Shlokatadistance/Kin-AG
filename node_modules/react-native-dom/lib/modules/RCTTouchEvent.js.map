{"version":3,"sources":["../../ReactDom/modules/RCTTouchEvent.js"],"names":["RCTTouchEvent","eventName","reactTag","reactTouches","changedIndexes","coalescingKey","viewTag","event","length","newEventIsMoreRecent","oldEventIsMoreRecent","count","i","touch","newTouch","identifier","timestamp","filter","e"],"mappings":"8aAEA,4DAGA,2F,GAIMA,CAAAA,a,YAUJ,uBACEC,SADF,CAEEC,QAFF,CAGEC,YAHF,CAIEC,cAJF,CAKEC,aALF,CAME,kDACA,KAAKC,OAAL,CAAeJ,QAAf,CACA,KAAKD,SAAL,CAAiBA,SAAjB,CACA,KAAKE,YAAL,CAAoBA,YAApB,CACA,KAAKC,cAAL,CAAsBA,cAAtB,CACA,KAAKC,aAAL,CAAqBA,aAArB,CACD,C,wFAEsB,CACrB,MAAO,MAAKJ,SAAL,GAAmB,WAA1B,CACD,C,4DAGiBM,K,CAA2B,CAC3C,uBACEA,KAAK,WAAYP,CAAAA,aADnB,CAEE,8DAFF,EAIA,uBACE,KAAKG,YAAL,CAAkBK,MAAlB,GAA6BD,KAAK,CAACJ,YAAN,CAAmBK,MADlD,CAEE,gDAFF,EAKA,GAAIC,CAAAA,oBAAoB,CAAG,KAA3B,CACA,GAAIC,CAAAA,oBAAoB,CAAG,KAA3B,CACA,GAAIC,CAAAA,KAAK,CAAG,KAAKR,YAAL,CAAkBK,MAA9B,CACA,IAAK,GAAII,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGD,KAApB,CAA2BC,CAAC,EAA5B,CAAgC,CAC9B,GAAMC,CAAAA,KAAK,CAAG,KAAKV,YAAL,CAAkBS,CAAlB,CAAd,CACA,GAAME,CAAAA,QAAQ,CAAGP,KAAK,CAACJ,YAAN,CAAmBS,CAAnB,CAAjB,CAEA,uBACEC,KAAK,CAACE,UAAN,GAAqBD,QAAQ,CAACC,UADhC,CAEE,sDAFF,EAKA,GAAIF,KAAK,CAACG,SAAN,CAAkBF,QAAQ,CAACE,SAA/B,CAA0C,CACxCN,oBAAoB,CAAG,IAAvB,CACD,CAFD,IAEO,CACLD,oBAAoB,CAAG,IAAvB,CACD,CACF,CAED,uBACE,CAACC,oBAAD,CAAuBD,oBAAvB,EAA6CQ,MAA7C,CAAoD,SAACC,CAAD,QAAOA,CAAAA,CAAP,EAApD,EAA8DV,MAA9D,GACE,CAFJ,CAGE,oEAHF,EAMA,MAAOC,CAAAA,oBAAoB,CAAGF,KAAH,CAAW,IAAtC,CACD,C,yDAEyB,CACxB,MAAO,gCAAP,CACD,C,8CAEuB,CACtB,MAAO,CACL,gDAAwB,KAAKN,SAA7B,CADK,CAEL,KAAKE,YAFA,CAGL,KAAKC,cAHA,CAAP,CAKD,C,0CAGYJ,a","sourcesContent":["/** @flow */\n\nimport invariant from \"invariant\";\n\nimport type { RCTEvent } from \"RCTEventDispatcher\";\nimport RCTEventDispatcher, {\n  normalizeInputEventName\n} from \"RCTEventDispatcher\";\n\nclass RCTTouchEvent implements RCTEvent {\n  // interface properties\n  viewTag: number;\n  eventName: string;\n  coalescingKey: number;\n\n  // touch properties\n  reactTouches: Array<{ [string]: any }>;\n  changedIndexes: Array<number>;\n\n  constructor(\n    eventName: string,\n    reactTag: number,\n    reactTouches: Array<{ [string]: any }>,\n    changedIndexes: Array<number>,\n    coalescingKey: number\n  ) {\n    this.viewTag = reactTag;\n    this.eventName = eventName;\n    this.reactTouches = reactTouches;\n    this.changedIndexes = changedIndexes;\n    this.coalescingKey = coalescingKey;\n  }\n\n  canCoalesce(): boolean {\n    return this.eventName === \"touchMove\";\n  }\n\n  // We coalesce only move events, while holding some assumptions that seem reasonable but there are no explicit guarantees about them.\n  coalesceWithEvent(event: RCTEvent): RCTEvent {\n    invariant(\n      event instanceof RCTTouchEvent,\n      \"Touch event cannot be coalesced with any other type of event\"\n    );\n    invariant(\n      this.reactTouches.length !== event.reactTouches.length,\n      \"Touch events have different number of touches.\"\n    );\n\n    let newEventIsMoreRecent = false;\n    let oldEventIsMoreRecent = false;\n    let count = this.reactTouches.length;\n    for (let i = 0; i < count; i++) {\n      const touch = this.reactTouches[i];\n      const newTouch = event.reactTouches[i];\n\n      invariant(\n        touch.identifier !== newTouch.identifier,\n        \"Touch events doesn't have touches in the same order.\"\n      );\n\n      if (touch.timestamp > newTouch.timestamp) {\n        oldEventIsMoreRecent = true;\n      } else {\n        newEventIsMoreRecent = true;\n      }\n    }\n\n    invariant(\n      [oldEventIsMoreRecent, newEventIsMoreRecent].filter((e) => e).length ===\n        1,\n      \"Neither touch event is exclusively more recent than the other one.\"\n    );\n\n    return newEventIsMoreRecent ? event : this;\n  }\n\n  moduleDotMethod(): string {\n    return \"RCTEventEmitter.receiveTouches\";\n  }\n\n  arguments(): Array<any> {\n    return [\n      normalizeInputEventName(this.eventName),\n      this.reactTouches,\n      this.changedIndexes\n    ];\n  }\n}\n\nexport default RCTTouchEvent;\n"],"file":"RCTTouchEvent.js"}