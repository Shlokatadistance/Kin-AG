var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _assertThisInitialized2=_interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));var _RCTModule2=_interopRequireDefault(require("./../bridge/RCTModule"));var _NotificationCenter=_interopRequireDefault(require("./../base/NotificationCenter"));var _RCTSharedTextValues=require("./../views/Text/RCTSharedTextValues");var _ColorArrayFromHexARGB=_interopRequireDefault(require("./../utils/ColorArrayFromHexARGB"));var RCTDevLoadingView=function(_RCTModule){(0,_inherits2.default)(RCTDevLoadingView,_RCTModule);function RCTDevLoadingView(bridge){var _this;(0,_classCallCheck2.default)(this,RCTDevLoadingView);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(RCTDevLoadingView).call(this,bridge));_this.initView();_NotificationCenter.default.addListener("RCTJavaScriptDidLoadNotification",_this.$hide.bind((0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this))));if(_this.bridge.loading){_this.showWithURL(new URL(bridge.bundleLocation));}return _this;}(0,_createClass2.default)(RCTDevLoadingView,[{key:"initView",value:function initView(){this.view=document.createElement("div");(0,_extends2.default)(this.view.style,{width:"100%",height:"22px",fontFamily:_RCTSharedTextValues.defaultFontStack,fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",zIndex:"99999",top:"0",left:"0",transition:"transform 0.1s",transform:"translateY(-22px)",overflow:"hidden"});this.bridge.parent.appendChild(this.view);}},{key:"updateView",value:function updateView(){this.view.innerText=this.message;(0,_extends2.default)(this.view.style,{color:this.color,backgroundColor:this.backgroundColor,transform:this.hidden?"translateY(-22px)":"translateY(0px)"});}},{key:"$showMessage",value:function $showMessage(message,color,backgroundColor){this.message=message;if(typeof color==="number"){var _ColorArrayFromHexARG=(0,_ColorArrayFromHexARGB.default)(color),_ColorArrayFromHexARG2=(0,_slicedToArray2.default)(_ColorArrayFromHexARG,4),a=_ColorArrayFromHexARG2[0],r=_ColorArrayFromHexARG2[1],g=_ColorArrayFromHexARG2[2],b=_ColorArrayFromHexARG2[3];var stringValue="rgba("+r+","+g+","+b+","+a+")";this.color=stringValue;}else{this.color=color;}if(typeof backgroundColor==="number"){var _ColorArrayFromHexARG3=(0,_ColorArrayFromHexARGB.default)(backgroundColor),_ColorArrayFromHexARG4=(0,_slicedToArray2.default)(_ColorArrayFromHexARG3,4),_a=_ColorArrayFromHexARG4[0],_r=_ColorArrayFromHexARG4[1],_g=_ColorArrayFromHexARG4[2],_b=_ColorArrayFromHexARG4[3];var _stringValue="rgba("+_r+","+_g+","+_b+","+_a+")";this.backgroundColor=_stringValue;}else{this.backgroundColor=backgroundColor;}this.hidden=false;this.updateView();}},{key:"$hide",value:function $hide(){this.hidden=true;this.updateView();}},{key:"updateProgress",value:function updateProgress(_ref){var done=_ref.done,total=_ref.total;var color="white";var backgroundColor="#005900";var message="Loading "+(done/total*100).toFixed(0)+"% ("+done+"/"+total+")";this.$showMessage(message,color,backgroundColor);}},{key:"showWithURL",value:function showWithURL(url){var color="white";var backgroundColor="#005900";var message="Loading from "+url.href+"...";this.$showMessage(message,color,backgroundColor);}}]);return RCTDevLoadingView;}(_RCTModule2.default);RCTDevLoadingView.moduleName="RCTDevLoadingView";var _default=RCTDevLoadingView;exports.default=_default;
//# sourceMappingURL=RCTDevLoadingView.js.map