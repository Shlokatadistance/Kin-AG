{"version":3,"sources":["../../ReactDom/DevSupport/RCTDevLoadingView.js"],"names":["RCTDevLoadingView","bridge","initView","NotificationCenter","addListener","$hide","bind","loading","showWithURL","URL","bundleLocation","view","document","createElement","style","width","height","fontFamily","defaultFontStack","fontSize","display","alignItems","justifyContent","position","zIndex","top","left","transition","transform","overflow","parent","appendChild","innerText","message","color","backgroundColor","hidden","a","r","g","b","stringValue","updateView","done","total","toFixed","$showMessage","url","href","RCTModule","moduleName"],"mappings":"q5BAGA,yEACA,wFACA,wEACA,+F,GAEMA,CAAAA,iB,2EASJ,2BAAYC,MAAZ,CAA+B,gEAC7B,6GAAMA,MAAN,GAEA,MAAKC,QAAL,GAEAC,4BAAmBC,WAAnB,CACE,kCADF,CAEE,MAAKC,KAAL,CAAWC,IAAX,iFAFF,EAKA,GAAI,MAAKL,MAAL,CAAYM,OAAhB,CAAyB,CACvB,MAAKC,WAAL,CAAiB,GAAIC,CAAAA,GAAJ,CAAQR,MAAM,CAACS,cAAf,CAAjB,EACD,CAZ4B,aAa9B,C,sFAEU,CACT,KAAKC,IAAL,CAAYC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ,CACA,sBAAc,KAAKF,IAAL,CAAUG,KAAxB,CAA+B,CAC7BC,KAAK,CAAE,MADsB,CAE7BC,MAAM,CAAE,MAFqB,CAG7BC,UAAU,CAAEC,qCAHiB,CAI7BC,QAAQ,CAAE,MAJmB,CAK7BC,OAAO,CAAE,MALoB,CAM7BC,UAAU,CAAE,QANiB,CAO7BC,cAAc,CAAE,QAPa,CAQ7BC,QAAQ,CAAE,OARmB,CAS7BC,MAAM,CAAE,OATqB,CAU7BC,GAAG,CAAE,GAVwB,CAW7BC,IAAI,CAAE,GAXuB,CAY7BC,UAAU,CAAE,gBAZiB,CAa7BC,SAAS,CAAE,mBAbkB,CAc7BC,QAAQ,CAAE,QAdmB,CAA/B,EAgBA,KAAK5B,MAAL,CAAY6B,MAAZ,CAAmBC,WAAnB,CAA+B,KAAKpB,IAApC,EACD,C,+CAEY,CACX,KAAKA,IAAL,CAAUqB,SAAV,CAAsB,KAAKC,OAA3B,CACA,sBAAc,KAAKtB,IAAL,CAAUG,KAAxB,CAA+B,CAC7BoB,KAAK,CAAE,KAAKA,KADiB,CAE7BC,eAAe,CAAE,KAAKA,eAFO,CAG7BP,SAAS,CAAE,KAAKQ,MAAL,CAAc,mBAAd,CAAoC,iBAHlB,CAA/B,EAKD,C,kDAGCH,O,CACAC,K,CACAC,e,CACA,CACA,KAAKF,OAAL,CAAeA,OAAf,CAEA,GAAI,MAAOC,CAAAA,KAAP,GAAiB,QAArB,CAA+B,2BACR,mCAAsBA,KAAtB,CADQ,6EACtBG,CADsB,2BACnBC,CADmB,2BAChBC,CADgB,2BACbC,CADa,2BAE7B,GAAMC,CAAAA,WAAW,SAAWH,CAAX,KAAgBC,CAAhB,KAAqBC,CAArB,KAA0BH,CAA1B,IAAjB,CACA,KAAKH,KAAL,CAAaO,WAAb,CACD,CAJD,IAIO,CACL,KAAKP,KAAL,CAAaA,KAAb,CACD,CAED,GAAI,MAAOC,CAAAA,eAAP,GAA2B,QAA/B,CAAyC,4BAClB,mCAAsBA,eAAtB,CADkB,8EAChCE,EADgC,2BAC7BC,EAD6B,2BAC1BC,EAD0B,2BACvBC,EADuB,2BAEvC,GAAMC,CAAAA,YAAW,SAAWH,EAAX,KAAgBC,EAAhB,KAAqBC,EAArB,KAA0BH,EAA1B,IAAjB,CACA,KAAKF,eAAL,CAAuBM,YAAvB,CACD,CAJD,IAIO,CACL,KAAKN,eAAL,CAAuBA,eAAvB,CACD,CAED,KAAKC,MAAL,CAAc,KAAd,CACA,KAAKM,UAAL,GACD,C,qCAEO,CACN,KAAKN,MAAL,CAAc,IAAd,CACA,KAAKM,UAAL,GACD,C,2DAEgE,IAAhDC,CAAAA,IAAgD,MAAhDA,IAAgD,CAA1CC,KAA0C,MAA1CA,KAA0C,CAC/D,GAAMV,CAAAA,KAAK,CAAG,OAAd,CACA,GAAMC,CAAAA,eAAe,CAAG,SAAxB,CACA,GAAMF,CAAAA,OAAO,YAAc,CAAEU,IAAI,CAAGC,KAAR,CAAiB,GAAlB,EAAuBC,OAAvB,CACzB,CADyB,CAAd,OAENF,IAFM,KAEEC,KAFF,IAAb,CAGA,KAAKE,YAAL,CAAkBb,OAAlB,CAA2BC,KAA3B,CAAkCC,eAAlC,EACD,C,gDAEWY,G,CAAU,CACpB,GAAMb,CAAAA,KAAK,CAAG,OAAd,CACA,GAAMC,CAAAA,eAAe,CAAG,SAAxB,CACA,GAAMF,CAAAA,OAAO,iBAAmBc,GAAG,CAACC,IAAvB,MAAb,CACA,KAAKF,YAAL,CAAkBb,OAAlB,CAA2BC,KAA3B,CAAkCC,eAAlC,EACD,C,+BApG6Bc,mB,EAA1BjD,iB,CACGkD,U,CAAa,mB,cAsGPlD,iB","sourcesContent":["/** @flow */\n\nimport type RCTBridge from \"RCTBridge\";\nimport RCTModule from \"RCTModule\";\nimport NotificationCenter from \"NotificationCenter\";\nimport { defaultFontStack } from \"RCTSharedTextValues\";\nimport ColorArrayFromHexARGB from \"ColorArrayFromHexARGB\";\n\nclass RCTDevLoadingView extends RCTModule {\n  static moduleName = \"RCTDevLoadingView\";\n\n  hidden: boolean;\n  color: string;\n  backgroundColor: string;\n  message: string;\n  view: HTMLDivElement;\n\n  constructor(bridge: RCTBridge) {\n    super(bridge);\n\n    this.initView();\n\n    NotificationCenter.addListener(\n      \"RCTJavaScriptDidLoadNotification\",\n      this.$hide.bind(this)\n    );\n\n    if (this.bridge.loading) {\n      this.showWithURL(new URL(bridge.bundleLocation));\n    }\n  }\n\n  initView() {\n    this.view = document.createElement(\"div\");\n    Object.assign(this.view.style, {\n      width: \"100%\",\n      height: \"22px\",\n      fontFamily: defaultFontStack,\n      fontSize: \"12px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      position: \"fixed\",\n      zIndex: \"99999\",\n      top: \"0\",\n      left: \"0\",\n      transition: \"transform 0.1s\",\n      transform: \"translateY(-22px)\",\n      overflow: \"hidden\"\n    });\n    this.bridge.parent.appendChild(this.view);\n  }\n\n  updateView() {\n    this.view.innerText = this.message;\n    Object.assign(this.view.style, {\n      color: this.color,\n      backgroundColor: this.backgroundColor,\n      transform: this.hidden ? \"translateY(-22px)\" : \"translateY(0px)\"\n    });\n  }\n\n  $showMessage(\n    message: string,\n    color: string | number,\n    backgroundColor: string | number\n  ) {\n    this.message = message;\n\n    if (typeof color === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(color);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.color = stringValue;\n    } else {\n      this.color = color;\n    }\n\n    if (typeof backgroundColor === \"number\") {\n      const [a, r, g, b] = ColorArrayFromHexARGB(backgroundColor);\n      const stringValue = `rgba(${r},${g},${b},${a})`;\n      this.backgroundColor = stringValue;\n    } else {\n      this.backgroundColor = backgroundColor;\n    }\n\n    this.hidden = false;\n    this.updateView();\n  }\n\n  $hide() {\n    this.hidden = true;\n    this.updateView();\n  }\n\n  updateProgress({ done, total }: { done: number, total: number }) {\n    const color = \"white\";\n    const backgroundColor = \"#005900\";\n    const message = `Loading ${((done / total) * 100).toFixed(\n      0\n    )}% (${done}/${total})`;\n    this.$showMessage(message, color, backgroundColor);\n  }\n\n  showWithURL(url: URL) {\n    const color = \"white\";\n    const backgroundColor = \"#005900\";\n    const message = `Loading from ${url.href}...`;\n    this.$showMessage(message, color, backgroundColor);\n  }\n}\n\nexport default RCTDevLoadingView;\n"],"file":"RCTDevLoadingView.js"}